"undefined"==typeof PDFJS&&(("undefined"!=typeof window?window:this).PDFJS={}),function(){"use strict";function getFileName(url){var anchor=url.indexOf("#"),query=url.indexOf("?"),end=Math.min(anchor>0?anchor:url.length,query>0?query:url.length);return url.substring(url.lastIndexOf("/",end)+1,end)}function getOutputScale(ctx){var devicePixelRatio=window.devicePixelRatio||1,backingStoreRatio=ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1,pixelRatio=devicePixelRatio/backingStoreRatio;return{sx:pixelRatio,sy:pixelRatio,scaled:1!==pixelRatio}}function scrollIntoView(element,spot,skipOverflowHiddenElements){var parent=element.offsetParent;if(!parent)return void console.error("offsetParent is not set -- cannot scroll");for(var checkOverflow=skipOverflowHiddenElements||!1,offsetY=element.offsetTop+element.clientTop,offsetX=element.offsetLeft+element.clientLeft;parent.clientHeight===parent.scrollHeight||checkOverflow&&"hidden"===getComputedStyle(parent).overflow;)if(parent.dataset._scaleY&&(offsetY/=parent.dataset._scaleY,offsetX/=parent.dataset._scaleX),offsetY+=parent.offsetTop,offsetX+=parent.offsetLeft,parent=parent.offsetParent,!parent)return;spot&&(void 0!==spot.top&&(offsetY+=spot.top),void 0!==spot.left&&(offsetX+=spot.left,parent.scrollLeft=offsetX)),parent.scrollTop=offsetY}function watchScroll(viewAreaElement,callback){var debounceScroll=function(evt){rAF||(rAF=window.requestAnimationFrame(function(){rAF=null;var currentY=viewAreaElement.scrollTop,lastY=state.lastY;currentY!==lastY&&(state.down=currentY>lastY),state.lastY=currentY,callback(state)}))},state={down:!0,lastY:viewAreaElement.scrollTop,_eventHandler:debounceScroll},rAF=null;return viewAreaElement.addEventListener("scroll",debounceScroll,!0),state}function parseQueryString(query){for(var parts=query.split("&"),params={},i=0,ii=parts.length;ii>i;++i){var param=parts[i].split("="),key=param[0].toLowerCase(),value=param.length>1?param[1]:null;params[decodeURIComponent(key)]=decodeURIComponent(value)}return params}function binarySearchFirstItem(items,condition){var minIndex=0,maxIndex=items.length-1;if(0===items.length||!condition(items[maxIndex]))return items.length;if(condition(items[minIndex]))return minIndex;for(;maxIndex>minIndex;){var currentIndex=minIndex+maxIndex>>1,currentItem=items[currentIndex];condition(currentItem)?maxIndex=currentIndex:minIndex=currentIndex+1}return minIndex}function approximateFraction(x){if(Math.floor(x)===x)return[x,1];var xinv=1/x,limit=8;if(xinv>limit)return[1,limit];if(Math.floor(xinv)===xinv)return[1,xinv];for(var x_=x>1?xinv:x,a=0,b=1,c=1,d=1;;){var p=a+c,q=b+d;if(q>limit)break;p/q>=x_?(c=p,d=q):(a=p,b=q)}return c/d-x_>x_-a/b?x_===x?[a,b]:[b,a]:x_===x?[c,d]:[d,c]}function roundToDivide(x,div){var r=x%div;return 0===r?x:Math.round(x-r+div)}function getVisibleElements(scrollEl,views,sortByVisibility){function isElementBottomBelowViewTop(view){var element=view.div,elementBottom=element.offsetTop+element.clientTop+element.clientHeight;return elementBottom>top}for(var view,element,currentHeight,viewHeight,hiddenHeight,percentHeight,currentWidth,viewWidth,top=scrollEl.scrollTop,bottom=top+scrollEl.clientHeight,left=scrollEl.scrollLeft,right=left+scrollEl.clientWidth,visible=[],firstVisibleElementInd=0===views.length?0:binarySearchFirstItem(views,isElementBottomBelowViewTop),i=firstVisibleElementInd,ii=views.length;ii>i&&(view=views[i],element=view.div,currentHeight=element.offsetTop+element.clientTop,viewHeight=element.clientHeight,!(currentHeight>bottom));i++)currentWidth=element.offsetLeft+element.clientLeft,viewWidth=element.clientWidth,left>currentWidth+viewWidth||currentWidth>right||(hiddenHeight=Math.max(0,top-currentHeight)+Math.max(0,currentHeight+viewHeight-bottom),percentHeight=100*(viewHeight-hiddenHeight)/viewHeight|0,visible.push({id:view.id,x:currentWidth,y:currentHeight,view:view,percent:percentHeight}));var first=visible[0],last=visible[visible.length-1];return sortByVisibility&&visible.sort(function(a,b){var pc=a.percent-b.percent;return Math.abs(pc)>.001?-pc:a.id-b.id}),{first:first,last:last,views:visible}}function DefaultTextLayerFactory(){}function DefaultAnnotationsLayerFactory(){}var CSS_UNITS=96/72,DEFAULT_SCALE_VALUE="auto",DEFAULT_SCALE=1,UNKNOWN_SCALE=0,MAX_AUTO_SCALE=1.25,SCROLLBAR_PADDING=40,VERTICAL_PADDING=5,ProgressBar=function(){function clamp(v,min,max){return Math.min(Math.max(v,min),max)}function ProgressBar(id,opts){this.visible=!0,this.div=document.querySelector(id+" .progress"),this.bar=this.div.parentNode,this.height=opts.height||100,this.width=opts.width||100,this.units=opts.units||"%",this.div.style.height=this.height+this.units,this.percent=0}return ProgressBar.prototype={updateBar:function(){if(this._indeterminate)return this.div.classList.add("indeterminate"),void(this.div.style.width=this.width+this.units);this.div.classList.remove("indeterminate");var progressSize=this.width*this._percent/100;this.div.style.width=progressSize+this.units},get percent(){return this._percent},set percent(val){this._indeterminate=isNaN(val),this._percent=clamp(val,0,100),this.updateBar()},setWidth:function(viewer){if(viewer){var container=viewer.parentNode,scrollbarWidth=container.offsetWidth-viewer.offsetWidth;scrollbarWidth>0&&this.bar.setAttribute("style","width: calc(100% - "+scrollbarWidth+"px);")}},hide:function(){this.visible&&(this.visible=!1,this.bar.classList.add("hidden"),document.body.classList.remove("loadingInProgress"))},show:function(){this.visible||(this.visible=!0,document.body.classList.add("loadingInProgress"),this.bar.classList.remove("hidden"))}},ProgressBar}(),PDFLinkService=function(){function PDFLinkService(){this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null,this._pagesRefCache=null}return PDFLinkService.prototype={setDocument:function(pdfDocument,baseUrl){this.baseUrl=baseUrl,this.pdfDocument=pdfDocument,this._pagesRefCache=Object.create(null)},setViewer:function(pdfViewer){this.pdfViewer=pdfViewer},setHistory:function(pdfHistory){this.pdfHistory=pdfHistory},get pagesCount(){return this.pdfDocument.numPages},get page(){return this.pdfViewer.currentPageNumber},set page(value){this.pdfViewer.currentPageNumber=value},navigateTo:function(dest){var destinationPromise,destString="",self=this,goToDestination=function(destRef){var pageNumber=destRef instanceof Object?self._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;pageNumber?(pageNumber>self.pagesCount&&(pageNumber=self.pagesCount),self.pdfViewer.scrollPageIntoView(pageNumber,dest),self.pdfHistory&&self.pdfHistory.push({dest:dest,hash:destString,page:pageNumber})):self.pdfDocument.getPageIndex(destRef).then(function(pageIndex){var pageNum=pageIndex+1,cacheKey=destRef.num+" "+destRef.gen+" R";self._pagesRefCache[cacheKey]=pageNum,goToDestination(destRef)})};"string"==typeof dest?(destString=dest,destinationPromise=this.pdfDocument.getDestination(dest)):destinationPromise=Promise.resolve(dest),destinationPromise.then(function(destination){dest=destination,destination instanceof Array&&goToDestination(destination[0])})},getDestinationHash:function(dest){if("string"==typeof dest)return this.getAnchorUrl("#"+escape(dest));if(dest instanceof Array){var destRef=dest[0],pageNumber=destRef instanceof Object?this._pagesRefCache[destRef.num+" "+destRef.gen+" R"]:destRef+1;if(pageNumber){var pdfOpenParams=this.getAnchorUrl("#page="+pageNumber),destKind=dest[1];if("object"==typeof destKind&&"name"in destKind&&"XYZ"===destKind.name){var scale=dest[4]||this.pdfViewer.currentScaleValue,scaleNumber=parseFloat(scale);scaleNumber&&(scale=100*scaleNumber),pdfOpenParams+="&zoom="+scale,(dest[2]||dest[3])&&(pdfOpenParams+=","+(dest[2]||0)+","+(dest[3]||0))}return pdfOpenParams}}return""},getAnchorUrl:function(anchor){return(this.baseUrl||"")+anchor},setHash:function(hash){if(hash.indexOf("=")>=0){var params=parseQueryString(hash);if("nameddest"in params)return this.pdfHistory&&this.pdfHistory.updateNextHashParam(params.nameddest),void this.navigateTo(params.nameddest);var pageNumber,dest;if("page"in params&&(pageNumber=0|params.page||1),"zoom"in params){var zoomArgs=params.zoom.split(","),zoomArg=zoomArgs[0],zoomArgNumber=parseFloat(zoomArg);-1===zoomArg.indexOf("Fit")?dest=[null,{name:"XYZ"},zoomArgs.length>1?0|zoomArgs[1]:null,zoomArgs.length>2?0|zoomArgs[2]:null,zoomArgNumber?zoomArgNumber/100:zoomArg]:"Fit"===zoomArg||"FitB"===zoomArg?dest=[null,{name:zoomArg}]:"FitH"===zoomArg||"FitBH"===zoomArg||"FitV"===zoomArg||"FitBV"===zoomArg?dest=[null,{name:zoomArg},zoomArgs.length>1?0|zoomArgs[1]:null]:"FitR"===zoomArg?5!==zoomArgs.length?console.error("PDFLinkService_setHash: Not enough parameters for 'FitR'."):dest=[null,{name:zoomArg},0|zoomArgs[1],0|zoomArgs[2],0|zoomArgs[3],0|zoomArgs[4]]:console.error("PDFLinkService_setHash: '"+zoomArg+"' is not a valid zoom value.")}if(dest?this.pdfViewer.scrollPageIntoView(pageNumber||this.page,dest):pageNumber&&(this.page=pageNumber),"pagemode"in params){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagemode",!0,!0,{mode:params.pagemode}),this.pdfViewer.container.dispatchEvent(event)}}else/^\d+$/.test(hash)?this.page=hash:(this.pdfHistory&&this.pdfHistory.updateNextHashParam(unescape(hash)),this.navigateTo(unescape(hash)))},executeNamedAction:function(action){switch(action){case"GoBack":this.pdfHistory&&this.pdfHistory.back();break;case"GoForward":this.pdfHistory&&this.pdfHistory.forward();break;case"NextPage":this.page++;break;case"PrevPage":this.page--;break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}var event=document.createEvent("CustomEvent");event.initCustomEvent("namedaction",!0,!0,{action:action}),this.pdfViewer.container.dispatchEvent(event)},cachePageRef:function(pageNum,pageRef){var refStr=pageRef.num+" "+pageRef.gen+" R";this._pagesRefCache[refStr]=pageNum}},PDFLinkService}(),PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3},IGNORE_CURRENT_POSITION_ON_ZOOM=!1,DEFAULT_CACHE_SIZE=10,CLEANUP_TIMEOUT=3e4,RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},PDFRenderingQueue=function(){function PDFRenderingQueue(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}return PDFRenderingQueue.prototype={setViewer:function(pdfViewer){this.pdfViewer=pdfViewer},setThumbnailViewer:function(pdfThumbnailViewer){this.pdfThumbnailViewer=pdfThumbnailViewer},isHighestPriority:function(view){return this.highestPriorityPage===view.renderingId},renderHighestPriority:function(currentlyVisiblePages){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),this.pdfViewer.forceRendering(currentlyVisiblePages)||this.pdfThumbnailViewer&&this.isThumbnailViewEnabled&&this.pdfThumbnailViewer.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),CLEANUP_TIMEOUT))},getHighestPriority:function(visible,views,scrolledDown){var visibleViews=visible.views,numVisible=visibleViews.length;if(0===numVisible)return!1;for(var i=0;numVisible>i;++i){var view=visibleViews[i].view;if(!this.isViewFinished(view))return view}if(scrolledDown){var nextPageIndex=visible.last.id;if(views[nextPageIndex]&&!this.isViewFinished(views[nextPageIndex]))return views[nextPageIndex]}else{var previousPageIndex=visible.first.id-2;if(views[previousPageIndex]&&!this.isViewFinished(views[previousPageIndex]))return views[previousPageIndex]}return null},isViewFinished:function(view){return view.renderingState===RenderingStates.FINISHED},renderView:function(view){var state=view.renderingState;switch(state){case RenderingStates.FINISHED:return!1;case RenderingStates.PAUSED:this.highestPriorityPage=view.renderingId,view.resume();break;case RenderingStates.RUNNING:this.highestPriorityPage=view.renderingId;break;case RenderingStates.INITIAL:this.highestPriorityPage=view.renderingId;var continueRendering=function(){this.renderHighestPriority()}.bind(this);view.draw().then(continueRendering,continueRendering)}return!0}},PDFRenderingQueue}(),TEXT_LAYER_RENDER_DELAY=200,PDFPageView=function(){function PDFPageView(options){var container=options.container,id=options.id,scale=options.scale,defaultViewport=options.defaultViewport,renderingQueue=options.renderingQueue,textLayerFactory=options.textLayerFactory,annotationsLayerFactory=options.annotationsLayerFactory;this.id=id,this.renderingId="page"+id,this.rotation=0,this.scale=scale||DEFAULT_SCALE,this.viewport=defaultViewport,this.pdfPageRotate=defaultViewport.rotation,this.hasRestrictedScaling=!1,this.renderingQueue=renderingQueue,this.textLayerFactory=textLayerFactory,this.annotationsLayerFactory=annotationsLayerFactory,this.renderingState=RenderingStates.INITIAL,this.resume=null,this.onBeforeDraw=null,this.onAfterDraw=null,this.textLayer=null,this.zoomLayer=null,this.annotationLayer=null;var div=document.createElement("div");div.id="pageContainer"+this.id,div.className="page",div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px",div.setAttribute("data-page-number",this.id),this.div=div,container.appendChild(div)}var CustomStyle=PDFJS.CustomStyle;return PDFPageView.prototype={setPdfPage:function(pdfPage){this.pdfPage=pdfPage,this.pdfPageRotate=pdfPage.rotate;var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=pdfPage.getViewport(this.scale*CSS_UNITS,totalRotation),this.stats=pdfPage.stats,this.reset()},destroy:function(){this.zoomLayer=null,this.reset(),this.pdfPage&&this.pdfPage.cleanup()},reset:function(keepZoomLayer,keepAnnotations){this.renderTask&&this.renderTask.cancel(),this.resume=null,this.renderingState=RenderingStates.INITIAL;var div=this.div;div.style.width=Math.floor(this.viewport.width)+"px",div.style.height=Math.floor(this.viewport.height)+"px";for(var childNodes=div.childNodes,currentZoomLayerNode=keepZoomLayer&&this.zoomLayer||null,currentAnnotationNode=keepAnnotations&&this.annotationLayer&&this.annotationLayer.div||null,i=childNodes.length-1;i>=0;i--){var node=childNodes[i];currentZoomLayerNode!==node&&currentAnnotationNode!==node&&div.removeChild(node)}div.removeAttribute("data-loaded"),currentAnnotationNode?this.annotationLayer.hide():this.annotationLayer=null,this.canvas&&!currentZoomLayerNode&&(this.canvas.width=0,this.canvas.height=0,delete this.canvas),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon",div.appendChild(this.loadingIconDiv)},update:function(scale,rotation){this.scale=scale||this.scale,"undefined"!=typeof rotation&&(this.rotation=rotation);var totalRotation=(this.rotation+this.pdfPageRotate)%360;this.viewport=this.viewport.clone({scale:this.scale*CSS_UNITS,rotation:totalRotation});var isScalingRestricted=!1;if(this.canvas&&PDFJS.maxCanvasPixels>0){var outputScale=this.outputScale,pixelsInViewport=this.viewport.width*this.viewport.height;Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);(Math.floor(this.viewport.width)*outputScale.sx|0)*(Math.floor(this.viewport.height)*outputScale.sy|0)>PDFJS.maxCanvasPixels&&(isScalingRestricted=!0)}if(this.canvas){if(PDFJS.useOnlyCssZoom||this.hasRestrictedScaling&&isScalingRestricted){this.cssTransform(this.canvas,!0);var event=document.createEvent("CustomEvent");return event.initCustomEvent("pagerendered",!0,!0,{pageNumber:this.id,cssTransform:!0}),void this.div.dispatchEvent(event)}this.zoomLayer||(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform(this.zoomLayer.firstChild),this.reset(!0,!0)},updatePosition:function(){this.textLayer&&this.textLayer.render(TEXT_LAYER_RENDER_DELAY)},cssTransform:function(canvas,redrawAnnotations){var width=this.viewport.width,height=this.viewport.height,div=this.div;canvas.style.width=canvas.parentNode.style.width=div.style.width=Math.floor(width)+"px",canvas.style.height=canvas.parentNode.style.height=div.style.height=Math.floor(height)+"px";var relativeRotation=this.viewport.rotation-canvas._viewport.rotation,absRotation=Math.abs(relativeRotation),scaleX=1,scaleY=1;(90===absRotation||270===absRotation)&&(scaleX=height/width,scaleY=width/height);var cssTransform="rotate("+relativeRotation+"deg) scale("+scaleX+","+scaleY+")";if(CustomStyle.setProp("transform",canvas,cssTransform),this.textLayer){var textLayerViewport=this.textLayer.viewport,textRelativeRotation=this.viewport.rotation-textLayerViewport.rotation,textAbsRotation=Math.abs(textRelativeRotation),scale=width/textLayerViewport.width;(90===textAbsRotation||270===textAbsRotation)&&(scale=width/textLayerViewport.height);var transX,transY,textLayerDiv=this.textLayer.textLayerDiv;switch(textAbsRotation){case 0:transX=transY=0;break;case 90:transX=0,transY="-"+textLayerDiv.style.height;break;case 180:transX="-"+textLayerDiv.style.width,transY="-"+textLayerDiv.style.height;break;case 270:transX="-"+textLayerDiv.style.width,transY=0;break;default:console.error("Bad rotation value.")}CustomStyle.setProp("transform",textLayerDiv,"rotate("+textAbsRotation+"deg) scale("+scale+", "+scale+") translate("+transX+", "+transY+")"),CustomStyle.setProp("transformOrigin",textLayerDiv,"0% 0%")}redrawAnnotations&&this.annotationLayer&&this.annotationLayer.setupAnnotations(this.viewport)},get width(){return this.viewport.width},get height(){return this.viewport.height},getPagePoint:function(x,y){return this.viewport.convertToPdfPoint(x,y)},draw:function(){function pageViewDrawCallback(error){if(renderTask===self.renderTask&&(self.renderTask=null),"cancelled"===error)return void rejectRenderPromise(error);if(self.renderingState=RenderingStates.FINISHED,isCanvasHidden&&(self.canvas.removeAttribute("hidden"),isCanvasHidden=!1),self.loadingIconDiv&&(div.removeChild(self.loadingIconDiv),delete self.loadingIconDiv),self.zoomLayer){var zoomLayerCanvas=self.zoomLayer.firstChild;zoomLayerCanvas.width=0,zoomLayerCanvas.height=0,div.removeChild(self.zoomLayer),self.zoomLayer=null}self.error=error,self.stats=pdfPage.stats,self.onAfterDraw&&self.onAfterDraw();var event=document.createEvent("CustomEvent");event.initCustomEvent("pagerendered",!0,!0,{pageNumber:self.id,cssTransform:!1}),div.dispatchEvent(event),error?rejectRenderPromise(error):resolveRenderPromise(void 0)}this.renderingState!==RenderingStates.INITIAL&&console.error("Must be in new state before drawing"),this.renderingState=RenderingStates.RUNNING;var pdfPage=this.pdfPage,viewport=this.viewport,div=this.div,canvasWrapper=document.createElement("div");canvasWrapper.style.width=div.style.width,canvasWrapper.style.height=div.style.height,canvasWrapper.classList.add("canvasWrapper");var canvas=document.createElement("canvas");canvas.id="page"+this.id,canvas.setAttribute("hidden","hidden");var isCanvasHidden=!0;canvasWrapper.appendChild(canvas),this.annotationLayer&&this.annotationLayer.div?div.insertBefore(canvasWrapper,this.annotationLayer.div):div.appendChild(canvasWrapper),this.canvas=canvas;var ctx=canvas.getContext("2d",{alpha:!1}),outputScale=getOutputScale(ctx);if(this.outputScale=outputScale,PDFJS.useOnlyCssZoom){var actualSizeViewport=viewport.clone({scale:CSS_UNITS});outputScale.sx*=actualSizeViewport.width/viewport.width,outputScale.sy*=actualSizeViewport.height/viewport.height,outputScale.scaled=!0}if(PDFJS.maxCanvasPixels>0){var pixelsInViewport=viewport.width*viewport.height,maxScale=Math.sqrt(PDFJS.maxCanvasPixels/pixelsInViewport);outputScale.sx>maxScale||outputScale.sy>maxScale?(outputScale.sx=maxScale,outputScale.sy=maxScale,outputScale.scaled=!0,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}var sfx=approximateFraction(outputScale.sx),sfy=approximateFraction(outputScale.sy);canvas.width=roundToDivide(viewport.width*outputScale.sx,sfx[0]),canvas.height=roundToDivide(viewport.height*outputScale.sy,sfy[0]),canvas.style.width=roundToDivide(viewport.width,sfx[1])+"px",canvas.style.height=roundToDivide(viewport.height,sfy[1])+"px",canvas._viewport=viewport;var textLayerDiv=null,textLayer=null;this.textLayerFactory&&(textLayerDiv=document.createElement("div"),textLayerDiv.className="textLayer",textLayerDiv.style.width=canvasWrapper.style.width,textLayerDiv.style.height=canvasWrapper.style.height,this.annotationLayer&&this.annotationLayer.div?div.insertBefore(textLayerDiv,this.annotationLayer.div):div.appendChild(textLayerDiv),textLayer=this.textLayerFactory.createTextLayerBuilder(textLayerDiv,this.id-1,this.viewport)),this.textLayer=textLayer;var resolveRenderPromise,rejectRenderPromise,promise=new Promise(function(resolve,reject){resolveRenderPromise=resolve,rejectRenderPromise=reject}),self=this,renderContinueCallback=null;this.renderingQueue&&(renderContinueCallback=function(cont){return self.renderingQueue.isHighestPriority(self)?(isCanvasHidden&&(self.canvas.removeAttribute("hidden"),isCanvasHidden=!1),void cont()):(self.renderingState=RenderingStates.PAUSED,void(self.resume=function(){self.renderingState=RenderingStates.RUNNING,cont()}))});var transform=outputScale.scaled?[outputScale.sx,0,0,outputScale.sy,0,0]:null,renderContext={canvasContext:ctx,transform:transform,viewport:this.viewport},renderTask=this.renderTask=this.pdfPage.render(renderContext);return renderTask.onContinue=renderContinueCallback,this.renderTask.promise.then(function(){pageViewDrawCallback(null),textLayer&&self.pdfPage.getTextContent().then(function(textContent){textLayer.setTextContent(textContent),textLayer.render(TEXT_LAYER_RENDER_DELAY)})},function(error){pageViewDrawCallback(error)}),this.annotationsLayerFactory&&(this.annotationLayer||(this.annotationLayer=this.annotationsLayerFactory.createAnnotationsLayerBuilder(div,this.pdfPage)),this.annotationLayer.setupAnnotations(this.viewport)),div.setAttribute("data-loaded",!0),self.onBeforeDraw&&self.onBeforeDraw(),promise},beforePrint:function(){var pdfPage=this.pdfPage,viewport=pdfPage.getViewport(1),PRINT_OUTPUT_SCALE=2,canvas=document.createElement("canvas");canvas.width=Math.floor(viewport.width)*PRINT_OUTPUT_SCALE,canvas.height=Math.floor(viewport.height)*PRINT_OUTPUT_SCALE,canvas.style.width=100*PRINT_OUTPUT_SCALE+"%",canvas.style.height=100*PRINT_OUTPUT_SCALE+"%";var cssScale="scale("+1/PRINT_OUTPUT_SCALE+", "+1/PRINT_OUTPUT_SCALE+")";CustomStyle.setProp("transform",canvas,cssScale),CustomStyle.setProp("transformOrigin",canvas,"0% 0%");var printContainer=document.getElementById("printContainer"),canvasWrapper=document.createElement("div");canvasWrapper.style.width=viewport.width+"pt",canvasWrapper.style.height=viewport.height+"pt",canvasWrapper.appendChild(canvas),printContainer.appendChild(canvasWrapper),canvas.mozPrintCallback=function(obj){var ctx=obj.context;ctx.save(),ctx.fillStyle="rgb(255, 255, 255)",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.restore(),ctx._transformMatrix=[PRINT_OUTPUT_SCALE,0,0,PRINT_OUTPUT_SCALE,0,0],ctx.scale(PRINT_OUTPUT_SCALE,PRINT_OUTPUT_SCALE);var renderContext={canvasContext:ctx,viewport:viewport,intent:"print"};pdfPage.render(renderContext).promise.then(function(){obj.done()},function(error){console.error(error),"abort"in obj?obj.abort():obj.done()})}}},PDFPageView}(),TextLayerBuilder=function(){function TextLayerBuilder(options){this.textLayerDiv=options.textLayerDiv,this.renderingDone=!1,this.divContentDone=!1,this.pageIdx=options.pageIndex,this.pageNumber=this.pageIdx+1,this.matches=[],this.viewport=options.viewport,this.textDivs=[],this.findController=options.findController||null,this.textLayerRenderTask=null,this._bindMouse()}return TextLayerBuilder.prototype={_finishRendering:function(){this.renderingDone=!0;var endOfContent=document.createElement("div");endOfContent.className="endOfContent",this.textLayerDiv.appendChild(endOfContent);var event=document.createEvent("CustomEvent");event.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:this.pageNumber}),this.textLayerDiv.dispatchEvent(event)},render:function(timeout){if(this.divContentDone&&!this.renderingDone){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textDivs=[];var textLayerFrag=document.createDocumentFragment();this.textLayerRenderTask=PDFJS.renderTextLayer({textContent:this.textContent,container:textLayerFrag,viewport:this.viewport,textDivs:this.textDivs,timeout:timeout}),this.textLayerRenderTask.promise.then(function(){this.textLayerDiv.appendChild(textLayerFrag),this._finishRendering(),this.updateMatches()}.bind(this),function(reason){})}},setTextContent:function(textContent){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.textContent=textContent,this.divContentDone=!0},convertMatches:function(matches){for(var i=0,iIndex=0,bidiTexts=this.textContent.items,end=bidiTexts.length-1,queryLen=null===this.findController?0:this.findController.state.query.length,ret=[],m=0,len=matches.length;len>m;m++){for(var matchIdx=matches[m];i!==end&&matchIdx>=iIndex+bidiTexts[i].str.length;)iIndex+=bidiTexts[i].str.length,i++;i===bidiTexts.length&&console.error("Could not find a matching mapping");var match={begin:{divIdx:i,offset:matchIdx-iIndex}};for(matchIdx+=queryLen;i!==end&&matchIdx>iIndex+bidiTexts[i].str.length;)iIndex+=bidiTexts[i].str.length,i++;match.end={divIdx:i,offset:matchIdx-iIndex},ret.push(match)}return ret},renderMatches:function(matches){function beginText(begin,className){var divIdx=begin.divIdx;textDivs[divIdx].textContent="",appendTextToDiv(divIdx,0,begin.offset,className)}function appendTextToDiv(divIdx,fromOffset,toOffset,className){var div=textDivs[divIdx],content=bidiTexts[divIdx].str.substring(fromOffset,toOffset),node=document.createTextNode(content);if(className){var span=document.createElement("span");return span.className=className,span.appendChild(node),void div.appendChild(span)}div.appendChild(node)}if(0!==matches.length){var bidiTexts=this.textContent.items,textDivs=this.textDivs,prevEnd=null,pageIdx=this.pageIdx,isSelectedPage=null===this.findController?!1:pageIdx===this.findController.selected.pageIdx,selectedMatchIdx=null===this.findController?-1:this.findController.selected.matchIdx,highlightAll=null===this.findController?!1:this.findController.state.highlightAll,infinity={divIdx:-1,offset:void 0},i0=selectedMatchIdx,i1=i0+1;if(highlightAll)i0=0,i1=matches.length;else if(!isSelectedPage)return;for(var i=i0;i1>i;i++){var match=matches[i],begin=match.begin,end=match.end,isSelected=isSelectedPage&&i===selectedMatchIdx,highlightSuffix=isSelected?" selected":"";if(this.findController&&this.findController.updateMatchPosition(pageIdx,i,textDivs,begin.divIdx,end.divIdx),prevEnd&&begin.divIdx===prevEnd.divIdx?appendTextToDiv(prevEnd.divIdx,prevEnd.offset,begin.offset):(null!==prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset),beginText(begin)),begin.divIdx===end.divIdx)appendTextToDiv(begin.divIdx,begin.offset,end.offset,"highlight"+highlightSuffix);else{appendTextToDiv(begin.divIdx,begin.offset,infinity.offset,"highlight begin"+highlightSuffix);for(var n0=begin.divIdx+1,n1=end.divIdx;n1>n0;n0++)textDivs[n0].className="highlight middle"+highlightSuffix;beginText(end,"highlight end"+highlightSuffix)}prevEnd=end}prevEnd&&appendTextToDiv(prevEnd.divIdx,prevEnd.offset,infinity.offset)}},updateMatches:function(){if(this.renderingDone){for(var matches=this.matches,textDivs=this.textDivs,bidiTexts=this.textContent.items,clearedUntilDivIdx=-1,i=0,len=matches.length;len>i;i++){for(var match=matches[i],begin=Math.max(clearedUntilDivIdx,match.begin.divIdx),n=begin,end=match.end.divIdx;end>=n;n++){var div=textDivs[n];div.textContent=bidiTexts[n].str,div.className=""}clearedUntilDivIdx=match.end.divIdx+1}null!==this.findController&&this.findController.active&&(this.matches=this.convertMatches(null===this.findController?[]:this.findController.pageMatches[this.pageIdx]||[]),this.renderMatches(this.matches))}},_bindMouse:function(){var div=this.textLayerDiv;div.addEventListener("mousedown",function(e){var end=div.querySelector(".endOfContent");if(end){var adjustTop=e.target!==div;if(adjustTop){var divBounds=div.getBoundingClientRect(),r=Math.max(0,(e.pageY-divBounds.top)/divBounds.height);end.style.top=(100*r).toFixed(2)+"%"}end.classList.add("active")}}),div.addEventListener("mouseup",function(e){var end=div.querySelector(".endOfContent");end&&(end.style.top="",end.classList.remove("active"))})}},TextLayerBuilder}();DefaultTextLayerFactory.prototype={createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport})}};var AnnotationsLayerBuilder=function(){function AnnotationsLayerBuilder(options){this.pageDiv=options.pageDiv,this.pdfPage=options.pdfPage,this.linkService=options.linkService,this.div=null}var CustomStyle=PDFJS.CustomStyle;return AnnotationsLayerBuilder.prototype={setupAnnotations:function(viewport){function bindLink(link,dest){link.href=linkService.getDestinationHash(dest),link.onclick=function(){return dest&&linkService.navigateTo(dest),!1},dest&&(link.className="internalLink")}function bindNamedAction(link,action){link.href=linkService.getAnchorUrl(""),link.onclick=function(){return linkService.executeNamedAction(action),!1},link.className="internalLink"}var linkService=this.linkService,pdfPage=this.pdfPage,self=this;pdfPage.getAnnotations().then(function(annotationsData){viewport=viewport.clone({dontFlip:!0});var data,element,i,ii,transform=viewport.transform,transformStr="matrix("+transform.join(",")+")";if(self.div){for(i=0,ii=annotationsData.length;ii>i;i++)data=annotationsData[i],element=self.div.querySelector('[data-annotation-id="'+data.id+'"]'),element&&CustomStyle.setProp("transform",element,transformStr);self.div.removeAttribute("hidden")}else for(i=0,ii=annotationsData.length;ii>i;i++)if(data=annotationsData[i],data&&data.hasHtml){element=PDFJS.AnnotationUtils.getHtmlElement(data,pdfPage.commonObjs),element.setAttribute("data-annotation-id",data.id),"undefined"!=typeof mozL10n&&mozL10n.translate(element);var rect=data.rect,view=pdfPage.view;rect=PDFJS.Util.normalizeRect([rect[0],view[3]-rect[1]+view[1],rect[2],view[3]-rect[3]+view[1]]),element.style.left=rect[0]+"px",element.style.top=rect[1]+"px",element.style.position="absolute",CustomStyle.setProp("transform",element,transformStr);var transformOriginStr=-rect[0]+"px "+-rect[1]+"px";if(CustomStyle.setProp("transformOrigin",element,transformOriginStr),"Link"===data.subtype&&!data.url){var link=element.getElementsByTagName("a")[0];link&&(data.action?bindNamedAction(link,data.action):bindLink(link,"dest"in data?data.dest:null))}if(!self.div){var annotationLayerDiv=document.createElement("div");annotationLayerDiv.className="annotationLayer",self.pageDiv.appendChild(annotationLayerDiv),self.div=annotationLayerDiv}self.div.appendChild(element)}})},hide:function(){this.div&&this.div.setAttribute("hidden","true")}},AnnotationsLayerBuilder}();DefaultAnnotationsLayerFactory.prototype={createAnnotationsLayerBuilder:function(pageDiv,pdfPage){return new AnnotationsLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,linkService:new SimpleLinkService})}};var PDFViewer=function(){function PDFPageViewBuffer(size){var data=[];this.push=function(view){var i=data.indexOf(view);i>=0&&data.splice(i,1),data.push(view),data.length>size&&data.shift().destroy()},this.resize=function(newSize){for(size=newSize;data.length>size;)data.shift().destroy()}}function isSameScale(oldScale,newScale){return newScale===oldScale?!0:Math.abs(newScale-oldScale)<1e-15?!0:!1}function PDFViewer(options){this.container=options.container,this.viewer=options.viewer||options.container.firstElementChild,this.linkService=options.linkService||new SimpleLinkService,this.removePageBorders=options.removePageBorders||!1,this.defaultRenderingQueue=!options.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new PDFRenderingQueue,
this.renderingQueue.setViewer(this)):this.renderingQueue=options.renderingQueue,this.scroll=watchScroll(this.container,this._scrollUpdate.bind(this)),this.updateInProgress=!1,this.presentationModeState=PresentationModeState.UNKNOWN,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders")}return PDFViewer.prototype={get pagesCount(){return this._pages.length},getPageView:function(index){return this._pages[index]},get currentPageNumber(){return this._currentPageNumber},set currentPageNumber(val){if(!this.pdfDocument)return void(this._currentPageNumber=val);var event=document.createEvent("UIEvents");return event.initUIEvent("pagechange",!0,!0,window,0),event.updateInProgress=this.updateInProgress,val>0&&val<=this.pagesCount?(event.previousPageNumber=this._currentPageNumber,this._currentPageNumber=val,event.pageNumber=val,this.container.dispatchEvent(event),void(this.updateInProgress||this.scrollPageIntoView(val))):(event.pageNumber=this._currentPageNumber,event.previousPageNumber=val,void this.container.dispatchEvent(event))},get currentScale(){return this._currentScale!==UNKNOWN_SCALE?this._currentScale:DEFAULT_SCALE},set currentScale(val){if(isNaN(val))throw new Error("Invalid numeric scale");return this.pdfDocument?void this._setScale(val,!1):(this._currentScale=val,void(this._currentScaleValue=val!==UNKNOWN_SCALE?val.toString():null))},get currentScaleValue(){return this._currentScaleValue},set currentScaleValue(val){return this.pdfDocument?void this._setScale(val,!1):(this._currentScale=isNaN(val)?UNKNOWN_SCALE:val,void(this._currentScaleValue=val))},get pagesRotation(){return this._pagesRotation},set pagesRotation(rotation){this._pagesRotation=rotation;for(var i=0,l=this._pages.length;l>i;i++){var pageView=this._pages[i];pageView.update(pageView.scale,rotation)}this._setScale(this._currentScaleValue,!0),this.defaultRenderingQueue&&this.update()},setDocument:function(pdfDocument){if(this.pdfDocument&&this._resetView(),this.pdfDocument=pdfDocument,pdfDocument){var resolvePagesPromise,pagesCount=pdfDocument.numPages,self=this,pagesPromise=new Promise(function(resolve){resolvePagesPromise=resolve});this.pagesPromise=pagesPromise,pagesPromise.then(function(){var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesloaded",!0,!0,{pagesCount:pagesCount}),self.container.dispatchEvent(event)});var isOnePageRenderedResolved=!1,resolveOnePageRendered=null,onePageRendered=new Promise(function(resolve){resolveOnePageRendered=resolve});this.onePageRendered=onePageRendered;var bindOnAfterAndBeforeDraw=function(pageView){pageView.onBeforeDraw=function(){self._buffer.push(this)},pageView.onAfterDraw=function(){isOnePageRenderedResolved||(isOnePageRenderedResolved=!0,resolveOnePageRendered())}},firstPagePromise=pdfDocument.getPage(1);return this.firstPagePromise=firstPagePromise,firstPagePromise.then(function(pdfPage){for(var scale=this.currentScale,viewport=pdfPage.getViewport(scale*CSS_UNITS),pageNum=1;pagesCount>=pageNum;++pageNum){var textLayerFactory=null;PDFJS.disableTextLayer||(textLayerFactory=this);var pageView=new PDFPageView({container:this.viewer,id:pageNum,scale:scale,defaultViewport:viewport.clone(),renderingQueue:this.renderingQueue,textLayerFactory:textLayerFactory,annotationsLayerFactory:this});bindOnAfterAndBeforeDraw(pageView),this._pages.push(pageView)}var linkService=this.linkService;onePageRendered.then(function(){if(PDFJS.disableAutoFetch)resolvePagesPromise();else for(var getPagesLeft=pagesCount,pageNum=1;pagesCount>=pageNum;++pageNum)pdfDocument.getPage(pageNum).then(function(pageNum,pdfPage){var pageView=self._pages[pageNum-1];pageView.pdfPage||pageView.setPdfPage(pdfPage),linkService.cachePageRef(pageNum,pdfPage.ref),getPagesLeft--,getPagesLeft||resolvePagesPromise()}.bind(null,pageNum))});var event=document.createEvent("CustomEvent");event.initCustomEvent("pagesinit",!0,!0,null),self.container.dispatchEvent(event),this.defaultRenderingQueue&&this.update(),this.findController&&this.findController.resolveFirstPage()}.bind(this))}},_resetView:function(){this._pages=[],this._currentPageNumber=1,this._currentScale=UNKNOWN_SCALE,this._currentScaleValue=null,this._buffer=new PDFPageViewBuffer(DEFAULT_CACHE_SIZE),this._location=null,this._pagesRotation=0,this._pagesRequests=[];for(var container=this.viewer;container.hasChildNodes();)container.removeChild(container.lastChild)},_scrollUpdate:function(){if(0!==this.pagesCount){this.update();for(var i=0,ii=this._pages.length;ii>i;i++)this._pages[i].updatePosition()}},_setScaleDispatchEvent:function(newScale,newValue,preset){var event=document.createEvent("UIEvents");event.initUIEvent("scalechange",!0,!0,window,0),event.scale=newScale,preset&&(event.presetValue=newValue),this.container.dispatchEvent(event)},_setScaleUpdatePages:function(newScale,newValue,noScroll,preset){if(this._currentScaleValue=newValue,isSameScale(this._currentScale,newScale))return void(preset&&this._setScaleDispatchEvent(newScale,newValue,!0));for(var i=0,ii=this._pages.length;ii>i;i++)this._pages[i].update(newScale);if(this._currentScale=newScale,!noScroll){var dest,page=this._currentPageNumber;!this._location||IGNORE_CURRENT_POSITION_ON_ZOOM||this.isInPresentationMode||this.isChangingPresentationMode||(page=this._location.pageNumber,dest=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView(page,dest)}this._setScaleDispatchEvent(newScale,newValue,preset),this.defaultRenderingQueue&&this.update()},_setScale:function(value,noScroll){var scale=parseFloat(value);if(scale>0)this._setScaleUpdatePages(scale,value,noScroll,!1);else{var currentPage=this._pages[this._currentPageNumber-1];if(!currentPage)return;var hPadding=this.isInPresentationMode||this.removePageBorders?0:SCROLLBAR_PADDING,vPadding=this.isInPresentationMode||this.removePageBorders?0:VERTICAL_PADDING,pageWidthScale=(this.container.clientWidth-hPadding)/currentPage.width*currentPage.scale,pageHeightScale=(this.container.clientHeight-vPadding)/currentPage.height*currentPage.scale;switch(value){case"page-actual":scale=1;break;case"page-width":scale=pageWidthScale;break;case"page-height":scale=pageHeightScale;break;case"page-fit":scale=Math.min(pageWidthScale,pageHeightScale);break;case"auto":var isLandscape=currentPage.width>currentPage.height,horizontalScale=isLandscape?Math.min(pageHeightScale,pageWidthScale):pageWidthScale;scale=Math.min(MAX_AUTO_SCALE,horizontalScale);break;default:return void console.error("pdfViewSetScale: '"+value+"' is an unknown zoom value.")}this._setScaleUpdatePages(scale,value,noScroll,!0)}},scrollPageIntoView:function(pageNumber,dest){if(this.pdfDocument){var pageView=this._pages[pageNumber-1];if(this.isInPresentationMode){if(this._currentPageNumber!==pageView.id)return void(this.currentPageNumber=pageView.id);dest=null,this._setScale(this._currentScaleValue,!0)}if(!dest)return void scrollIntoView(pageView.div);var widthScale,heightScale,x=0,y=0,width=0,height=0,changeOrientation=pageView.rotation%180===0?!1:!0,pageWidth=(changeOrientation?pageView.height:pageView.width)/pageView.scale/CSS_UNITS,pageHeight=(changeOrientation?pageView.width:pageView.height)/pageView.scale/CSS_UNITS,scale=0;switch(dest[1].name){case"XYZ":x=dest[2],y=dest[3],scale=dest[4],x=null!==x?x:0,y=null!==y?y:pageHeight;break;case"Fit":case"FitB":scale="page-fit";break;case"FitH":case"FitBH":y=dest[2],scale="page-width",null===y&&this._location&&(x=this._location.left,y=this._location.top);break;case"FitV":case"FitBV":x=dest[2],width=pageWidth,height=pageHeight,scale="page-height";break;case"FitR":x=dest[2],y=dest[3],width=dest[4]-x,height=dest[5]-y;var hPadding=this.removePageBorders?0:SCROLLBAR_PADDING,vPadding=this.removePageBorders?0:VERTICAL_PADDING;widthScale=(this.container.clientWidth-hPadding)/width/CSS_UNITS,heightScale=(this.container.clientHeight-vPadding)/height/CSS_UNITS,scale=Math.min(Math.abs(widthScale),Math.abs(heightScale));break;default:return}if(scale&&scale!==this._currentScale?this.currentScaleValue=scale:this._currentScale===UNKNOWN_SCALE&&(this.currentScaleValue=DEFAULT_SCALE_VALUE),"page-fit"===scale&&!dest[4])return void scrollIntoView(pageView.div);var boundingRect=[pageView.viewport.convertToViewportPoint(x,y),pageView.viewport.convertToViewportPoint(x+width,y+height)],left=Math.min(boundingRect[0][0],boundingRect[1][0]),top=Math.min(boundingRect[0][1],boundingRect[1][1]);scrollIntoView(pageView.div,{left:left,top:top})}},_updateLocation:function(firstPage){var currentScale=this._currentScale,currentScaleValue=this._currentScaleValue,normalizedScaleValue=parseFloat(currentScaleValue)===currentScale?Math.round(1e4*currentScale)/100:currentScaleValue,pageNumber=firstPage.id,pdfOpenParams="#page="+pageNumber;pdfOpenParams+="&zoom="+normalizedScaleValue;var currentPageView=this._pages[pageNumber-1],container=this.container,topLeft=currentPageView.getPagePoint(container.scrollLeft-firstPage.x,container.scrollTop-firstPage.y),intLeft=Math.round(topLeft[0]),intTop=Math.round(topLeft[1]);pdfOpenParams+=","+intLeft+","+intTop,this._location={pageNumber:pageNumber,scale:normalizedScaleValue,top:intTop,left:intLeft,pdfOpenParams:pdfOpenParams}},update:function(){var visible=this._getVisiblePages(),visiblePages=visible.views;if(0!==visiblePages.length){this.updateInProgress=!0;var suggestedCacheSize=Math.max(DEFAULT_CACHE_SIZE,2*visiblePages.length+1);this._buffer.resize(suggestedCacheSize),this.renderingQueue.renderHighestPriority(visible);for(var currentId=this._currentPageNumber,firstPage=visible.first,i=0,ii=visiblePages.length,stillFullyVisible=!1;ii>i;++i){var page=visiblePages[i];if(page.percent<100)break;if(page.id===currentId){stillFullyVisible=!0;break}}stillFullyVisible||(currentId=visiblePages[0].id),this.isInPresentationMode||(this.currentPageNumber=currentId),this._updateLocation(firstPage),this.updateInProgress=!1;var event=document.createEvent("UIEvents");event.initUIEvent("updateviewarea",!0,!0,window,0),event.location=this._location,this.container.dispatchEvent(event)}},containsElement:function(element){return this.container.contains(element)},focus:function(){this.container.focus()},get isInPresentationMode(){return this.presentationModeState===PresentationModeState.FULLSCREEN},get isChangingPresentationMode(){return this.presentationModeState===PresentationModeState.CHANGING},get isHorizontalScrollbarEnabled(){return this.isInPresentationMode?!1:this.container.scrollWidth>this.container.clientWidth},_getVisiblePages:function(){if(this.isInPresentationMode){var visible=[],currentPage=this._pages[this._currentPageNumber-1];return visible.push({id:currentPage.id,view:currentPage}),{first:currentPage,last:currentPage,views:visible}}return getVisibleElements(this.container,this._pages,!0)},cleanup:function(){for(var i=0,ii=this._pages.length;ii>i;i++)this._pages[i]&&this._pages[i].renderingState!==RenderingStates.FINISHED&&this._pages[i].reset()},_ensurePdfPageLoaded:function(pageView){if(pageView.pdfPage)return Promise.resolve(pageView.pdfPage);var pageNumber=pageView.id;if(this._pagesRequests[pageNumber])return this._pagesRequests[pageNumber];var promise=this.pdfDocument.getPage(pageNumber).then(function(pdfPage){return pageView.setPdfPage(pdfPage),this._pagesRequests[pageNumber]=null,pdfPage}.bind(this));return this._pagesRequests[pageNumber]=promise,promise},forceRendering:function(currentlyVisiblePages){var visiblePages=currentlyVisiblePages||this._getVisiblePages(),pageView=this.renderingQueue.getHighestPriority(visiblePages,this._pages,this.scroll.down);return pageView?(this._ensurePdfPageLoaded(pageView).then(function(){this.renderingQueue.renderView(pageView)}.bind(this)),!0):!1},getPageTextContent:function(pageIndex){return this.pdfDocument.getPage(pageIndex+1).then(function(page){return page.getTextContent()})},createTextLayerBuilder:function(textLayerDiv,pageIndex,viewport){return new TextLayerBuilder({textLayerDiv:textLayerDiv,pageIndex:pageIndex,viewport:viewport,findController:this.isInPresentationMode?null:this.findController})},createAnnotationsLayerBuilder:function(pageDiv,pdfPage){return new AnnotationsLayerBuilder({pageDiv:pageDiv,pdfPage:pdfPage,linkService:this.linkService})},setFindController:function(findController){this.findController=findController}},PDFViewer}(),SimpleLinkService=function(){function SimpleLinkService(){}return SimpleLinkService.prototype={get page(){return 0},set page(value){},navigateTo:function(dest){},getDestinationHash:function(dest){return"#"},getAnchorUrl:function(hash){return"#"},setHash:function(hash){},executeNamedAction:function(action){},cachePageRef:function(pageNum,pageRef){}},SimpleLinkService}(),PDFHistory=function(){function PDFHistory(options){this.linkService=options.linkService,this.initialized=!1,this.initialDestination=null,this.initialBookmark=null}return PDFHistory.prototype={initialize:function(fingerprint){function updateHistoryWithCurrentHash(){self.previousHash=window.location.hash.slice(1),self._pushToHistory({hash:self.previousHash},!1,!0),self._updatePreviousBookmark()}function replacePreviousHistoryState(params,callback){function rewriteHistoryAfterBack(){window.removeEventListener("popstate",rewriteHistoryAfterBack),window.addEventListener("popstate",rewriteHistoryAfterForward),self._pushToHistory(params,!1,!0),history.forward()}function rewriteHistoryAfterForward(){window.removeEventListener("popstate",rewriteHistoryAfterForward),self.allowHashChange=!0,self.historyUnlocked=!0,callback()}self.historyUnlocked=!1,self.allowHashChange=!1,window.addEventListener("popstate",rewriteHistoryAfterBack),history.back()}function pdfHistoryBeforeUnload(){var previousParams=self._getPreviousParams(null,!0);if(previousParams){var replacePrevious=!self.current.dest&&self.current.hash!==self.previousHash;self._pushToHistory(previousParams,!1,replacePrevious),self._updatePreviousBookmark()}window.removeEventListener("beforeunload",pdfHistoryBeforeUnload,!1)}this.initialized=!0,this.reInitialized=!1,this.allowHashChange=!0,this.historyUnlocked=!0,this.isViewerInPresentationMode=!1,this.previousHash=window.location.hash.substring(1),this.currentBookmark="",this.currentPage=0,this.updatePreviousBookmark=!1,this.previousBookmark="",this.previousPage=0,this.nextHashParam="",this.fingerprint=fingerprint,this.currentUid=this.uid=0,this.current={};var state=window.history.state;this._isStateObjectDefined(state)?(state.target.dest?this.initialDestination=state.target.dest:this.initialBookmark=state.target.hash,this.currentUid=state.uid,this.uid=state.uid+1,this.current=state.target):(state&&state.fingerprint&&this.fingerprint!==state.fingerprint&&(this.reInitialized=!0),this._pushOrReplaceState({fingerprint:this.fingerprint},!0));var self=this;window.addEventListener("popstate",function(evt){if(self.historyUnlocked){if(evt.state)return void self._goTo(evt.state);if(0===self.uid){var previousParams=self.previousHash&&self.currentBookmark&&self.previousHash!==self.currentBookmark?{hash:self.currentBookmark,page:self.currentPage}:{page:1};replacePreviousHistoryState(previousParams,function(){updateHistoryWithCurrentHash()})}else updateHistoryWithCurrentHash()}},!1),window.addEventListener("beforeunload",pdfHistoryBeforeUnload,!1),window.addEventListener("pageshow",function(evt){window.addEventListener("beforeunload",pdfHistoryBeforeUnload,!1)},!1),window.addEventListener("presentationmodechanged",function(e){self.isViewerInPresentationMode=!!e.detail.active})},clearHistoryState:function(){this._pushOrReplaceState(null,!0)},_isStateObjectDefined:function(state){return state&&state.uid>=0&&state.fingerprint&&this.fingerprint===state.fingerprint&&state.target&&state.target.hash?!0:!1},_pushOrReplaceState:function(stateObj,replace){replace?window.history.replaceState(stateObj,""):window.history.pushState(stateObj,"")},get isHashChangeUnlocked(){return this.initialized?this.allowHashChange:!0},_updatePreviousBookmark:function(){this.updatePreviousBookmark&&this.currentBookmark&&this.currentPage&&(this.previousBookmark=this.currentBookmark,this.previousPage=this.currentPage,this.updatePreviousBookmark=!1)},updateCurrentBookmark:function(bookmark,pageNum){this.initialized&&(this.currentBookmark=bookmark.substring(1),this.currentPage=0|pageNum,this._updatePreviousBookmark())},updateNextHashParam:function(param){this.initialized&&(this.nextHashParam=param)},push:function(params,isInitialBookmark){if(this.initialized&&this.historyUnlocked){if(params.dest&&!params.hash&&(params.hash=this.current.hash&&this.current.dest&&this.current.dest===params.dest?this.current.hash:this.linkService.getDestinationHash(params.dest).split("#")[1]),params.page&&(params.page|=0),isInitialBookmark){var target=window.history.state.target;return target||(this._pushToHistory(params,!1),this.previousHash=window.location.hash.substring(1)),this.updatePreviousBookmark=this.nextHashParam?!1:!0,void(target&&this._updatePreviousBookmark())}if(this.nextHashParam){if(this.nextHashParam===params.hash)return this.nextHashParam=null,void(this.updatePreviousBookmark=!0);this.nextHashParam=null}params.hash?this.current.hash?this.current.hash!==params.hash?this._pushToHistory(params,!0):(!this.current.page&&params.page&&this._pushToHistory(params,!1,!0),this.updatePreviousBookmark=!0):this._pushToHistory(params,!0):this.current.page&&params.page&&this.current.page!==params.page&&this._pushToHistory(params,!0)}},_getPreviousParams:function(onlyCheckPage,beforeUnload){if(!this.currentBookmark||!this.currentPage)return null;if(this.updatePreviousBookmark&&(this.updatePreviousBookmark=!1),this.uid>0&&(!this.previousBookmark||!this.previousPage))return null;if(!this.current.dest&&!onlyCheckPage||beforeUnload){if(this.previousBookmark===this.currentBookmark)return null}else{if(!this.current.page&&!onlyCheckPage)return null;if(this.previousPage===this.currentPage)return null}var params={hash:this.currentBookmark,page:this.currentPage};return this.isViewerInPresentationMode&&(params.hash=null),params},_stateObj:function(params){return{fingerprint:this.fingerprint,uid:this.uid,target:params}},_pushToHistory:function(params,addPrevious,overwrite){if(this.initialized){if(!params.hash&&params.page&&(params.hash="page="+params.page),addPrevious&&!overwrite){var previousParams=this._getPreviousParams();if(previousParams){var replacePrevious=!this.current.dest&&this.current.hash!==this.previousHash;this._pushToHistory(previousParams,!1,replacePrevious)}}this._pushOrReplaceState(this._stateObj(params),overwrite||0===this.uid),this.currentUid=this.uid++,this.current=params,this.updatePreviousBookmark=!0}},_goTo:function(state){if(this.initialized&&this.historyUnlocked&&this._isStateObjectDefined(state)){if(!this.reInitialized&&state.uid<this.currentUid){var previousParams=this._getPreviousParams(!0);if(previousParams)return this._pushToHistory(this.current,!1),this._pushToHistory(previousParams,!1),this.currentUid=state.uid,void window.history.back()}this.historyUnlocked=!1,state.target.dest?this.linkService.navigateTo(state.target.dest):this.linkService.setHash(state.target.hash),this.currentUid=state.uid,state.uid>this.uid&&(this.uid=state.uid),this.current=state.target,this.updatePreviousBookmark=!0;var currentHash=window.location.hash.substring(1);this.previousHash!==currentHash&&(this.allowHashChange=!1),this.previousHash=currentHash,this.historyUnlocked=!0}},back:function(){this.go(-1)},forward:function(){this.go(1)},go:function(direction){if(this.initialized&&this.historyUnlocked){var state=window.history.state;-1===direction&&state&&state.uid>0?window.history.back():1===direction&&state&&state.uid<this.uid-1&&window.history.forward()}}},PDFHistory}();PDFJS.PDFViewer=PDFViewer,PDFJS.PDFPageView=PDFPageView,PDFJS.PDFLinkService=PDFLinkService,PDFJS.TextLayerBuilder=TextLayerBuilder,PDFJS.DefaultTextLayerFactory=DefaultTextLayerFactory,PDFJS.AnnotationsLayerBuilder=AnnotationsLayerBuilder,PDFJS.DefaultAnnotationsLayerFactory=DefaultAnnotationsLayerFactory,PDFJS.PDFHistory=PDFHistory,PDFJS.getFileName=getFileName,PDFJS.ProgressBar=ProgressBar}.call("undefined"==typeof window?this:window);